{% extends "polls/base.html" %} {% block title %} Inicio {% endblock %}
{% block content %}

<section class="mt-5">
  <div class="container">
    {% if user.is_authenticated %}
    <h1 class="text-center mb-3">Hola, {{ user.username }}.</h1>
    {% endif %}
    {% if user.is_authenticated %}
    <a
      class="btn btn-primary mb-2"
      href="{% url 'polls:create_question' %}"
      role="button"
      >Crear Pregunta</a
    >
    {% endif %}
    {% if request.GET.search %}
    <h2 class="mb-2">Busqueda: {{ request.GET.search }}</h2>
    {% endif %}
  
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">Pregunta</th>
          <th scope="col">Fecha de publicacion</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      {% if latest_question_list %}
      <tbody>
        {% for question in latest_question_list %}
        <tr>
          <td>
            <a href="{% url 'polls:detail' question.id %}">
              {{ question.question_text }}
            </a>
          </td>
          <td>{{ question.pub_date }}</td>
          <td>
            <a
              href="{% url 'polls:detail' question.id %}"
              type="button"
              class="btn btn-outline-success"
              >Votar</a
            >
            {% if request.user.is_authenticated %}
            <a
              href="{% url 'polls:update_question' question.id %}"
              type="button"
              class="btn btn-outline-primary"
              >Actualizar</a
            >
            <a
              href="{% url 'polls:delete_question' question.id %}"
              type="button"
              class="btn btn-outline-danger"
              >Eliminar</a
            >
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
      {% else %}
      <p>No polls are available.</p>
      {% endif %}
    </table>
    {% include 'polls/pagination.html' %}
  </div>
</section>

{% endblock %}